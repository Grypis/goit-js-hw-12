{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/errorSvg.svg","../src/img/warningSvg.svg","../src/img/informSvg.svg","../src/main.js"],"sourcesContent":["// Axios library\nimport axios from 'axios';\nexport const fetchImages = async (requestInput, page, limit) => {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '44175237-f9b9fdf7256a15d8718cda915',\n      q: requestInput,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: limit,\n    },\n  });\n  return response.data;\n};\n","export function renderImages(images) {\n  return images.hits\n    .map(image => {\n      return `<li class=\"gallery-item\">\n        <a class=\"image-link\" href=\"${image.largeImageURL}\"\n          ><img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"\n        /></a>\n        <div class=\"image-stats\">\n          <div class=\"image-stat\">\n            <b>Likes</b>\n            <p>${image.likes}</p>\n          </div>\n          <div class=\"image-stat\">\n            <b>Views</b>\n            <p>${image.views}</p>\n          </div>\n          <div class=\"image-stat\">\n            <b>Comments</b>\n            <p>${image.comments}</p>\n          </div>\n          <div class=\"image-stat\">\n            <b>Downloads</b>\n            <p>${image.downloads}</p>\n          </div>\n        </div>\n      </li>`;\n    })\n    .join('');\n}\n","export default \"__VITE_ASSET__5f1026d9__\"","export default \"__VITE_ASSET__af0b83db__\"","export default \"__VITE_ASSET__de944bc6__\"","// custom import\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport errorSvg from './img/errorSvg.svg';\nimport warningSvg from './img/warningSvg.svg';\nimport informSvg from './img/informSvg.svg';\n// SimpleLightBox library\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// iziToast library\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchFormElem = document.querySelector('.search-form');\nconst searchInputElem = document.querySelector('.search-input');\nconst standBySpanElem = document.querySelector('.loader');\nconst galleryElem = document.querySelector('.gallery');\nconst loadBtnElem = document.querySelector('.load-btn');\nlet gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst limit = 15;\nlet page = 1;\nlet totalPages = 0;\nlet requestValue = '';\n\nsearchFormElem.addEventListener('submit', async event => {\n  event.preventDefault();\n  if (!searchInputElem.value.trim()) {\n    searchFormElem.reset();\n    return;\n  }\n  try {\n    page = 1;\n    requestValue = '';\n    loadBtnElem.classList.add('visually-hidden');\n    galleryElem.innerHTML = '';\n    standBySpanElem.classList.remove('visually-hidden');\n    const fetchData = await fetchImages(\n      searchInputElem.value.trim(),\n      page,\n      limit\n    );\n    if (!fetchData.total) {\n      iziToast.error({\n        iconUrl: errorSvg,\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      standBySpanElem.classList.add('visually-hidden');\n      return;\n    }\n    standBySpanElem.classList.add('visually-hidden');\n    galleryElem.insertAdjacentHTML('beforeend', renderImages(fetchData));\n    gallery.refresh();\n    totalPages = Math.ceil(fetchData.totalHits / limit);\n    requestValue = searchInputElem.value.trim();\n    if (page < totalPages) {\n      loadBtnElem.classList.remove('visually-hidden');\n    }\n  } catch (error) {\n    standBySpanElem.classList.add('visually-hidden');\n    iziToast.warning({\n      iconUrl: warningSvg,\n      position: 'topRight',\n      message: `${error}`,\n    });\n  }\n  searchFormElem.reset();\n});\n\nloadBtnElem.addEventListener('click', async event => {\n  page += 1;\n  if (page === totalPages) {\n    iziToast.info({\n      iconUrl: informSvg,\n      position: 'topRight',\n      backgroundColor: '#09f',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    standBySpanElem.classList.add('visually-hidden');\n    loadBtnElem.classList.add('visually-hidden');\n  }\n  try {\n    standBySpanElem.classList.remove('visually-hidden');\n    const fetchData = await fetchImages(requestValue, page, limit);\n    standBySpanElem.classList.add('visually-hidden');\n    galleryElem.insertAdjacentHTML('beforeend', renderImages(fetchData));\n    gallery.refresh();\n    window.scrollBy({\n      top: galleryElem.firstChild.getBoundingClientRect().height * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    standBySpanElem.classList.add('visually-hidden');\n    iziToast.warning({\n      iconUrl: warningSvg,\n      position: 'topRight',\n      message: `${error}`,\n    });\n  }\n});\n"],"names":["fetchImages","requestInput","page","limit","axios","renderImages","images","image","errorSvg","warningSvg","informSvg","searchFormElem","searchInputElem","standBySpanElem","galleryElem","loadBtnElem","gallery","SimpleLightbox","totalPages","requestValue","event","fetchData","iziToast","error"],"mappings":"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"}